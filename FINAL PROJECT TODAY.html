<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElevateX - AI-Powered Website Security Scanner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #00c6ff;
            --primary-dark: #0072ff;
            --bg-dark: #0d1117;
            --bg-darker: #0a0b0f;
            --card-bg: #1c1f26;
            --card-bg-dark: #1a1c22;
            --text-light: #f0f0f5;
            --text-gray: #bbb;
            --danger: #ff4757;
            --warning: #ffa502;
            --success: #2ed573;
            --border: #444;
        }

        [data-theme="light"] {
            --bg-dark: #f8f9fa;
            --bg-darker: #e9ecef;
            --card-bg: #ffffff;
            --card-bg-dark: #f8f9fa;
            --text-light: #212529;
            --text-gray: #6c757d;
            --border: #dee2e6;
            --primary: #0072ff;
            --primary-dark: #0056cc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            scroll-behavior: smooth;
            transition: background-color 0.4s, color 0.4s;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header .hero {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            text-align: center;
            padding: 100px 20px;
            border-bottom-left-radius: 50% 20%;
            border-bottom-right-radius: 50% 20%;
            position: relative;
            overflow: hidden;
        }

        header .hero h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header .hero p {
            font-size: 1.3em;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .gradient-btn {
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .gradient-btn:hover {
            background: linear-gradient(90deg, var(--primary-dark), var(--primary));
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .outline-btn {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .outline-btn:hover {
            background: var(--primary);
            color: white;
        }

        /* Navigation */
        nav {
            display: flex;
            justify-content: center;
            gap: 25px;
            background-color: rgba(11, 13, 18, 0.95);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            transition: background-color 0.4s;
        }

        [data-theme="light"] nav {
            background-color: rgba(248, 249, 250, 0.95);
        }

        nav a {
            color: var(--text-light);
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 5px;
            transition: 0.3s;
            text-decoration: none;
        }

        nav a:hover {
            color: var(--primary);
            background-color: rgba(255,255,255,0.1);
        }

        [data-theme="light"] nav a:hover {
            background-color: rgba(0,0,0,0.05);
        }

        /* Sections */
        section {
            padding: 80px 20px;
        }

        section h2 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.2em;
            color: var(--primary);
        }

        /* URL Scanner */
        .url-card {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            text-align: center;
            max-width: 800px;
            margin: 0 auto 40px;
            transition: background-color 0.4s, box-shadow 0.4s;
        }

        .check-url {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .check-url input {
            padding: 12px 20px;
            border-radius: 10px;
            border: 1px solid var(--border);
            flex: 1;
            min-width: 200px;
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-size: 16px;
            transition: background-color 0.4s, border-color 0.4s;
        }

        .check-url input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 198, 255, 0.2);
        }

        .check-url button {
            min-width: 140px;
        }

        .result {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
        }

        /* Analysis Components */
        .analysis-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .live-analysis {
            background: var(--card-bg-dark);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
            transition: background-color 0.4s;
        }

        .analysis-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .analysis-item:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .status-checking { background: var(--warning); animation: pulse 1.5s infinite; }
        .status-safe { background: var(--success); }
        .status-warning { background: var(--warning); }
        .status-danger { background: var(--danger); }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .threat-breakdown {
            background: var(--card-bg-dark);
            padding: 20px;
            border-radius: 10px;
            transition: background-color 0.4s;
        }

        .threat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            align-items: center;
        }

        .threat-meter {
            flex-grow: 1;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            margin: 0 15px;
            overflow: hidden;
        }

        .threat-level {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* AI Analysis Section */
        .ai-analysis {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 4px solid var(--primary);
            transition: background-color 0.4s;
        }

        .ai-analysis h4 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-response {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-style: italic;
            transition: background-color 0.4s;
        }

        [data-theme="light"] .ai-response {
            background: rgba(0, 0, 0, 0.05);
        }

        .confidence-meter {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .confidence-bar {
            flex-grow: 1;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
        }

        .confidence-level {
            height: 100%;
            border-radius: 4px;
            background: var(--primary);
            transition: width 0.5s ease;
        }

        /* Privacy Access Section */
        .privacy-access {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 4px solid var(--primary);
            transition: background-color 0.4s;
        }

        .privacy-access h4 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .access-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .access-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        [data-theme="light"] .access-item {
            background: rgba(0, 0, 0, 0.05);
        }

        .access-item i {
            font-size: 20px;
            width: 30px;
            text-align: center;
        }

        .access-item.granted i {
            color: var(--success);
        }

        .access-item.denied i {
            color: var(--danger);
        }

        .access-item.unknown i {
            color: var(--warning);
        }

        .access-details {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            font-size: 0.9em;
        }

        [data-theme="light"] .access-details {
            background: rgba(0, 0, 0, 0.05);
        }

        /* Features */
        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            justify-content: center;
        }

        .feature-card {
            background: var(--card-bg);
            padding: 30px 25px;
            border-radius: 20px;
            flex: 1 1 300px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
        }

        .feature-card h3 {
            color: var(--primary);
            margin: 15px 0;
        }

        .feature-card i {
            font-size: 40px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        /* Team */
        .team {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            justify-content: center;
        }

        .team-member {
            background: var(--card-bg);
            padding: 30px 25px;
            border-radius: 20px;
            flex: 1 1 250px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            transition: all 0.3s ease;
        }

        .team-member:hover {
            transform: translateY(-5px);
        }

        .team-member img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 3px solid var(--primary);
        }

        .member-details {
            margin-top: 10px;
            font-size: 0.9em;
        }

        /* Safety Tips */
        .safety-tips {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 4px solid var(--primary);
            transition: background-color 0.4s;
        }

        .safety-tips h4 {
            color: var(--primary);
            margin-bottom: 15px;
        }

        /* Contact Section */
        .contact-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 30px;
        }

        .contact-info {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            transition: background-color 0.4s;
        }

        .contact-info h3 {
            color: var(--primary);
            margin-bottom: 20px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .contact-item i {
            font-size: 20px;
            color: var(--primary);
            margin-right: 15px;
            width: 30px;
        }

        .contact-form {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            transition: background-color 0.4s;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-light);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-size: 16px;
            transition: background-color 0.4s, border-color 0.4s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 198, 255, 0.2);
        }

        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }

        .form-submit {
            text-align: center;
        }

        .form-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            display: none;
        }

        .form-message.success {
            background-color: rgba(46, 213, 115, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .form-message.error {
            background-color: rgba(255, 71, 87, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        /* Footer */
        footer {
            background: var(--bg-darker);
            color: var(--text-light);
            padding: 40px 20px;
            text-align: center;
            margin-top: 60px;
            transition: background-color 0.4s;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            color: var(--text-light);
            font-size: 20px;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .analysis-container {
                grid-template-columns: 1fr;
            }
            
            header .hero h1 {
                font-size: 2.5em;
            }
            
            .check-url {
                flex-direction: column;
            }

            .contact-container {
                grid-template-columns: 1fr;
            }

            .access-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body data-theme="dark">
    <header>
        <div class="hero">
            <h1>ElevateX</h1>
            <p>AI-Powered Website Security Scanner with Perplexity AI Integration</p>
            <button id="themeToggle" class="btn gradient-btn">
                <i class="fas fa-sun"></i> Light Mode
            </button>
        </div>
    </header>

    <nav>
        <a href="#home">Home</a>
        <a href="#features">Features</a>
        <a href="#team">Team</a>
        <a href="#contact">Contact</a>
    </nav>

    <section id="home">
        <div class="container">
            <h2>Real-Time AI Security Analysis</h2>
            <p>ElevateX combines advanced security algorithms with Perplexity AI to provide the most accurate website threat detection available.</p>

            <div class="url-card">
                <h3>AI-Powered Security Scanner</h3>
                <p>Enter a URL to perform comprehensive security analysis with Perplexity AI integration</p>
                <div class="check-url">
                    <input type="text" id="urlInput" placeholder="https://example.com" value="https://">
                    <button onclick="startAIAnalysis()" class="btn gradient-btn">
                        <i class="fas fa-robot"></i> Analyze with AI
                    </button>
                </div>
                
                <div class="analysis-container" id="analysisContainer" style="display: none;">
                    <div class="live-analysis">
                        <h4><i class="fas fa-chart-line"></i> Security Analysis</h4>
                        <div class="analysis-items" id="analysisItems">
                            <!-- Dynamic analysis items will be inserted here -->
                        </div>
                    </div>
                    
                    <div class="threat-breakdown">
                        <h4><i class="fas fa-exclamation-triangle"></i> Threat Assessment</h4>
                        <div class="threat-items" id="threatItems">
                            <!-- Dynamic threat items will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="ai-analysis" id="aiAnalysis" style="display: none;">
                    <h4><i class="fas fa-brain"></i> Perplexity AI Analysis</h4>
                    <div class="ai-response" id="aiResponse">
                        <!-- AI response will be displayed here -->
                    </div>
                    <div class="confidence-meter">
                        <span>AI Confidence:</span>
                        <div class="confidence-bar">
                            <div class="confidence-level" id="confidenceLevel" style="width: 0%"></div>
                        </div>
                        <span id="confidenceText">0%</span>
                    </div>
                </div>
                
                <!-- New Privacy Access Section -->
                <div class="privacy-access" id="privacyAccess" style="display: none;">
                    <h4><i class="fas fa-user-shield"></i> Privacy Access Analysis</h4>
                    <p>This website may request access to the following resources:</p>
                    <div class="access-grid" id="accessGrid">
                        <!-- Dynamic access items will be inserted here -->
                    </div>
                    <div class="access-details" id="accessDetails">
                        <!-- Detailed privacy information will be displayed here -->
                    </div>
                </div>
                
                <div class="result" id="result"></div>
            </div>
        </div>
    </section>

    <section id="features">
        <div class="container">
            <h2>Advanced Security Features</h2>
            <div class="features">
                <div class="feature-card">
                    <i class="fas fa-robot"></i>
                    <h3>Perplexity AI Integration</h3>
                    <p>Real-time AI analysis using Perplexity's advanced language model to detect sophisticated phishing attempts.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-bolt"></i>
                    <h3>Real-Time Scanning</h3>
                    <p>Instant analysis with live threat monitoring and continuous security updates.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Multi-Layer Protection</h3>
                    <p>Combines traditional security checks with AI-powered threat intelligence.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-cogs"></i>
                    <h3>Auto-Remediation</h3>
                    <p>Automated fixes for common vulnerabilities with one-click resolution.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-file-contract"></i>
                    <h3>Compliance Mapping</h3>
                    <p>Automatic mapping to SOC 2, GDPR, HIPAA, and PCI-DSS compliance frameworks.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-code-branch"></i>
                    <h3>CI/CD Integration</h3>
                    <p>Seamless integration with development pipelines for shift-left security.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="team">
        <div class="container">
            <h2>Our Security Team</h2>
            <div class="team">
                <div class="team-member">
                    <img src="https://drive.google.com/uc?export=view&id=1ufPP7SG1PcpJieAAG94FCWP1jxcHHzFB" alt="Ayan">
                    <h4>Ayan</h4>
                    <p>Cybersecurity Enthusiast</p>
                    <div class="member-details">
                        <p><i class="fas fa-graduation-cap"></i> 1st Year CSE, NIT Hamirpur</p>
                    </div>
                </div>
                <div class="team-member">
                    <img src="https://drive.google.com/uc?export=view&id=1FDMrWhz9_YSgtkp_qhVu05285G6EgLva" alt="Ravi Kumar Singh">
                    <h4>Ravi Kumar Singh</h4>
                    <p>AI/ML Enthusiast</p>
                    <div class="member-details">
                        <p><i class="fas fa-graduation-cap"></i> 1st Year Chemical Engineering, NIT Hamirpur</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="contact">
        <div class="container">
            <h2>Contact Us</h2>
            <div class="contact-container">
                <div class="contact-info">
                    <h3>Get In Touch</h3>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <h4>Location</h4>
                            <p>NIT Hamirpur, Himachal Pradesh, India</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h4>Email</h4>
                            <p>info@elevatex.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <h4>Phone</h4>
                            <p>9792873365</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <h4>Business Hours</h4>
                            <p>Monday - Friday: 9:00 AM - 6:00 PM</p>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form">
                    <h3>Send Us a Message</h3>
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="name">Full Name</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="subject">Subject</label>
                            <input type="text" id="subject" name="subject" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea id="message" name="message" required></textarea>
                        </div>
                        <div class="form-submit">
                            <button type="submit" class="btn gradient-btn">Send Message</button>
                        </div>
                        <div class="form-message" id="formMessage"></div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <h3>ElevateX</h3>
            <p>AI-Powered Website Security Scanner</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fab fa-github"></i></a>
                <a href="#"><i class="fab fa-facebook"></i></a>
            </div>
            <p>&copy; 2023 ElevateX. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;

        const savedTheme = localStorage.getItem('theme') || 
                          (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
        
        body.setAttribute('data-theme', savedTheme);
        updateThemeButton(savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeButton(newTheme);
        });

        function updateThemeButton(theme) {
            const icon = theme === 'dark' ? 'fa-sun' : 'fa-moon';
            const text = theme === 'dark' ? 'Light Mode' : 'Dark Mode';
            themeToggle.innerHTML = `<i class="fas ${icon}"></i> ${text}`;
        }

        // Contact Form Handling
        const contactForm = document.getElementById('contactForm');
        const formMessage = document.getElementById('formMessage');

        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const name = formData.get('name');
            const email = formData.get('email');
            const subject = formData.get('subject');
            const message = formData.get('message');
            
            // Simple validation
            if (!name || !email || !subject || !message) {
                showFormMessage('Please fill in all fields.', 'error');
                return;
            }
            
            if (!isValidEmail(email)) {
                showFormMessage('Please enter a valid email address.', 'error');
                return;
            }
            
            // Simulate form submission
            showFormMessage('Sending your message...', 'success');
            
            // In a real application, you would send the data to a server here
            setTimeout(() => {
                showFormMessage('Thank you! Your message has been sent successfully.', 'success');
                contactForm.reset();
            }, 1500);
        });

        function showFormMessage(message, type) {
            formMessage.textContent = message;
            formMessage.className = `form-message ${type}`;
            formMessage.style.display = 'block';
            
            // Hide message after 5 seconds
            setTimeout(() => {
                formMessage.style.display = 'none';
            }, 5000);
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Enhanced Security Analysis Engine
        class SecurityAnalyzer {
            constructor() {
                this.analysisCache = new Map();
                this.analysisSteps = [
                    { name: 'URL Structure', check: this.checkURLStructure },
                    { name: 'Domain Analysis', check: this.checkDomainReputation },
                    { name: 'SSL Security', check: this.checkSSLCertificate },
                    { name: 'Content Security', check: this.checkContentSecurity },
                    { name: 'Network Security', check: this.checkNetworkSecurity },
                    { name: 'Privacy Access', check: this.checkPrivacyAccess },
                    { name: 'Perplexity AI Scan', check: this.runAIAnalysis }
                ];
                
                // Known safe domains for comparison
                this.knownSafeDomains = [
                    'google.com', 'facebook.com', 'github.com', 'microsoft.com',
                    'apple.com', 'amazon.com', 'netflix.com', 'twitter.com',
                    'linkedin.com', 'instagram.com', 'wikipedia.org', 'stackoverflow.com'
                ];
                
                this.knownMaliciousDomains = [
                    'free-virus-scan.com', 'bank-login-update.com', 'paypal-security.com',
                    'facebook-login.xyz', 'microsoft-update.tk', 'apple-id-confirm.cf'
                ];
            }

            async analyzeURL(url) {
                // Check cache first
                if (this.analysisCache.has(url)) {
                    return this.analysisCache.get(url);
                }

                const analysisContainer = document.getElementById('analysisContainer');
                const analysisItems = document.getElementById('analysisItems');
                const threatItems = document.getElementById('threatItems');
                const aiAnalysis = document.getElementById('aiAnalysis');
                const privacyAccess = document.getElementById('privacyAccess');
                
                analysisContainer.style.display = 'grid';
                aiAnalysis.style.display = 'block';
                privacyAccess.style.display = 'block';
                analysisItems.innerHTML = '';
                threatItems.innerHTML = '';
                
                let totalRiskScore = 0;
                const threats = [];
                const analysisResults = [];

                for (let i = 0; i < this.analysisSteps.length; i++) {
                    const step = this.analysisSteps[i];
                    
                    // Update UI
                    const itemElement = document.createElement('div');
                    itemElement.className = 'analysis-item';
                    itemElement.innerHTML = `
                        <span class="status-indicator status-checking"></span>
                        <strong>${step.name}</strong>: Analyzing...
                    `;
                    analysisItems.appendChild(itemElement);

                    // Perform analysis
                    await this.delay(800 + Math.random() * 400);
                    
                    const result = await step.check.call(this, url);
                    analysisResults.push(result);
                    
                    // Update UI with result
                    const statusClass = result.riskLevel === 'high' ? 'status-danger' : 
                                      result.riskLevel === 'medium' ? 'status-warning' : 'status-safe';
                    
                    itemElement.innerHTML = `
                        <span class="status-indicator ${statusClass}"></span>
                        <strong>${step.name}</strong>: ${result.message}
                    `;

                    if (result.riskScore > 0) {
                        threats.push({
                            name: step.name,
                            riskScore: result.riskScore,
                            details: result.details
                        });
                    }
                    
                    totalRiskScore += result.riskScore;
                    
                    // Update threat breakdown
                    this.updateThreatBreakdown(threats);

                    // Special handling for AI analysis
                    if (step.name === 'Perplexity AI Scan') {
                        this.updateAIAnalysis(result.aiResult);
                    }

                    // Special handling for Privacy Access
                    if (step.name === 'Privacy Access') {
                        this.updatePrivacyAccess(result.privacyResult);
                    }
                }

                // Calculate weighted total risk score (not simple sum)
                const weightedRiskScore = this.calculateWeightedRisk(analysisResults);
                
                const finalResult = {
                    totalRiskScore: Math.min(weightedRiskScore, 100),
                    securityScore: Math.max(100 - weightedRiskScore, 0),
                    threats: threats,
                    analysisResults: analysisResults
                };

                // Cache the result
                this.analysisCache.set(url, finalResult);
                
                return finalResult;
            }

            calculateWeightedRisk(results) {
                const weights = {
                    'URL Structure': 0.15,
                    'Domain Analysis': 0.25,
                    'SSL Security': 0.20,
                    'Content Security': 0.15,
                    'Network Security': 0.10,
                    'Privacy Access': 0.10,
                    'Perplexity AI Scan': 0.05
                };

                let weightedScore = 0;
                results.forEach(result => {
                    const stepName = this.analysisSteps.find(step => 
                        step.check.name === result.sourceMethod
                    )?.name;
                    
                    if (stepName && weights[stepName]) {
                        weightedScore += result.riskScore * weights[stepName];
                    }
                });

                return Math.round(weightedScore);
            }

            updateThreatBreakdown(threats) {
                const threatItems = document.getElementById('threatItems');
                threatItems.innerHTML = '';
                
                threats.forEach(threat => {
                    const threatElement = document.createElement('div');
                    threatElement.className = 'threat-item';
                    threatElement.innerHTML = `
                        <span>${threat.name}</span>
                        <div class="threat-meter">
                            <div class="threat-level" style="width: ${threat.riskScore}%; background: ${this.getRiskColor(threat.riskScore)};"></div>
                        </div>
                        <span>${threat.riskScore}%</span>
                    `;
                    threatItems.appendChild(threatElement);
                });
            }

            updateAIAnalysis(aiResult) {
                const aiResponse = document.getElementById('aiResponse');
                const confidenceLevel = document.getElementById('confidenceLevel');
                const confidenceText = document.getElementById('confidenceText');
                
                aiResponse.innerHTML = aiResult.message;
                confidenceLevel.style.width = `${aiResult.confidence}%`;
                confidenceText.textContent = `${aiResult.confidence}%`;
            }

            updatePrivacyAccess(privacyResult) {
                const accessGrid = document.getElementById('accessGrid');
                const accessDetails = document.getElementById('accessDetails');
                
                // Clear previous results
                accessGrid.innerHTML = '';
                
                // Add access items
                privacyResult.accessRequests.forEach(access => {
                    const accessElement = document.createElement('div');
                    accessElement.className = `access-item ${access.status}`;
                    accessElement.innerHTML = `
                        <i class="${access.icon}"></i>
                        <span>${access.name}</span>
                    `;
                    accessGrid.appendChild(accessElement);
                });
                
                // Add details
                accessDetails.innerHTML = `
                    <strong>Privacy Summary:</strong> ${privacyResult.summary}
                    <br><br>
                    <strong>Recommendations:</strong> ${privacyResult.recommendations}
                `;
            }

            getRiskColor(riskScore) {
                if (riskScore < 30) return 'var(--success)';
                if (riskScore < 70) return 'var(--warning)';
                return 'var(--danger)';
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            // Analysis Methods
            checkURLStructure(url) {
                const urlObj = new URL(url);
                const riskFactors = [];
                let riskScore = 0;

                // Check for IP address
                const ipPattern = /^(?:\d{1,3}\.){3}\d{1,3}$/;
                if (ipPattern.test(urlObj.hostname)) {
                    riskFactors.push('Uses IP address instead of domain name');
                    riskScore += 15;
                }

                // Check for suspicious TLDs
                const suspiciousTLDs = ['.tk', '.ml', '.ga', '.cf', '.xyz', '.top'];
                const hasSuspiciousTLD = suspiciousTLDs.some(tld => urlObj.hostname.endsWith(tld));
                if (hasSuspiciousTLD) {
                    riskFactors.push('Uses suspicious top-level domain');
                    riskScore += 20;
                }

                // Check URL length
                if (url.length > 100) {
                    riskFactors.push('Unusually long URL (potential obfuscation)');
                    riskScore += 10;
                }

                // Check for excessive subdomains
                const subdomainCount = urlObj.hostname.split('.').length - 2;
                if (subdomainCount > 3) {
                    riskFactors.push('Excessive number of subdomains');
                    riskScore += 10;
                }

                // Check for special characters
                const specialCharPattern = /[%&=\?\+\/]/;
                if (specialCharPattern.test(urlObj.hostname)) {
                    riskFactors.push('Contains special characters in domain');
                    riskScore += 15;
                }

                const riskLevel = riskScore >= 30 ? 'high' : riskScore >= 15 ? 'medium' : 'low';
                
                return {
                    sourceMethod: 'checkURLStructure',
                    riskScore: Math.min(riskScore, 40),
                    riskLevel: riskLevel,
                    message: riskFactors.length > 0 ? 
                        `${riskFactors.length} suspicious URL characteristics detected` : 
                        'URL structure appears legitimate',
                    details: riskFactors.length > 0 ? riskFactors : ['No suspicious URL patterns detected']
                };
            }

            checkDomainReputation(url) {
                const urlObj = new URL(url);
                const domain = urlObj.hostname;
                const riskFactors = [];
                let riskScore = 0;

                // Check against known safe domains
                if (this.knownSafeDomains.includes(domain)) {
                    return {
                        sourceMethod: 'checkDomainReputation',
                        riskScore: 0,
                        riskLevel: 'low',
                        message: 'Domain is in known safe list',
                        details: ['Domain has good reputation']
                    };
                }

                // Check against known malicious domains
                if (this.knownMaliciousDomains.includes(domain)) {
                    riskFactors.push('Domain is in known malicious list');
                    riskScore += 40;
                }

                // Check domain age (simulated)
                const domainAge = Math.floor(Math.random() * 10) + 1; // 1-10 years
                if (domainAge < 1) {
                    riskFactors.push('Domain is very new (less than 1 year old)');
                    riskScore += 20;
                }

                // Check for suspicious keywords in domain
                const suspiciousKeywords = ['login', 'secure', 'account', 'verify', 'update', 'bank', 'paypal'];
                const hasSuspiciousKeyword = suspiciousKeywords.some(keyword => 
                    domain.toLowerCase().includes(keyword)
                );
                if (hasSuspiciousKeyword) {
                    riskFactors.push('Domain contains suspicious keywords');
                    riskScore += 15;
                }

                const riskLevel = riskScore >= 30 ? 'high' : riskScore >= 15 ? 'medium' : 'low';
                
                return {
                    sourceMethod: 'checkDomainReputation',
                    riskScore: Math.min(riskScore, 50),
                    riskLevel: riskLevel,
                    message: riskFactors.length > 0 ? 
                        `${riskFactors.length} domain reputation issues found` : 
                        'Domain reputation appears good',
                    details: riskFactors.length > 0 ? riskFactors : ['No domain reputation issues detected']
                };
            }

            checkSSLCertificate(url) {
                const riskFactors = [];
                let riskScore = 0;

                // Simulate SSL checks
                const hasSSL = Math.random() > 0.2; // 80% chance of having SSL
                if (!hasSSL) {
                    riskFactors.push('No SSL certificate detected');
                    riskScore += 30;
                } else {
                    const isExpired = Math.random() > 0.9; // 10% chance of expired
                    if (isExpired) {
                        riskFactors.push('SSL certificate is expired or invalid');
                        riskScore += 20;
                    }

                    const isWeak = Math.random() > 0.8; // 20% chance of weak encryption
                    if (isWeak) {
                        riskFactors.push('Weak SSL encryption detected');
                        riskScore += 15;
                    }
                }

                const riskLevel = riskScore >= 25 ? 'high' : riskScore >= 10 ? 'medium' : 'low';
                
                return {
                    sourceMethod: 'checkSSLCertificate',
                    riskScore: Math.min(riskScore, 40),
                    riskLevel: riskLevel,
                    message: riskFactors.length > 0 ? 
                        `${riskFactors.length} SSL security issues found` : 
                        'SSL certificate is valid and secure',
                    details: riskFactors.length > 0 ? riskFactors : ['SSL configuration appears secure']
                };
            }

            checkContentSecurity(url) {
                const riskFactors = [];
                let riskScore = 0;

                // Simulate content security checks
                const hasMaliciousScript = Math.random() > 0.7; // 30% chance
                if (hasMaliciousScript) {
                    riskFactors.push('Potential malicious scripts detected');
                    riskScore += 25;
                }

                const hasPhishingContent = Math.random() > 0.8; // 20% chance
                if (hasPhishingContent) {
                    riskFactors.push('Phishing-like content patterns detected');
                    riskScore += 30;
                }

                const hasMixedContent = Math.random() > 0.6; // 40% chance
                if (hasMixedContent) {
                    riskFactors.push('Mixed content (HTTP/HTTPS) detected');
                    riskScore += 15;
                }

                const riskLevel = riskScore >= 25 ? 'high' : riskScore >= 10 ? 'medium' : 'low';
                
                return {
                    sourceMethod: 'checkContentSecurity',
                    riskScore: Math.min(riskScore, 45),
                    riskLevel: riskLevel,
                    message: riskFactors.length > 0 ? 
                        `${riskFactors.length} content security issues found` : 
                        'Content security appears good',
                    details: riskFactors.length > 0 ? riskFactors : ['No content security issues detected']
                };
            }

            checkNetworkSecurity(url) {
                const riskFactors = [];
                let riskScore = 0;

                // Simulate network security checks
                const hasOpenPorts = Math.random() > 0.5; // 50% chance
                if (hasOpenPorts) {
                    riskFactors.push('Unnecessary open ports detected');
                    riskScore += 10;
                }

                const hasVulnerableServices = Math.random() > 0.7; // 30% chance
                if (hasVulnerableServices) {
                    riskFactors.push('Potentially vulnerable services detected');
                    riskScore += 20;
                }

                const isOnBlacklist = Math.random() > 0.9; // 10% chance
                if (isOnBlacklist) {
                    riskFactors.push('IP address found on security blacklists');
                    riskScore += 25;
                }

                const riskLevel = riskScore >= 20 ? 'high' : riskScore >= 10 ? 'medium' : 'low';
                
                return {
                    sourceMethod: 'checkNetworkSecurity',
                    riskScore: Math.min(riskScore, 35),
                    riskLevel: riskLevel,
                    message: riskFactors.length > 0 ? 
                        `${riskFactors.length} network security issues found` : 
                        'Network security appears good',
                    details: riskFactors.length > 0 ? riskFactors : ['No network security issues detected']
                };
            }

            checkPrivacyAccess(url) {
                const urlObj = new URL(url);
                const domain = urlObj.hostname;
                
                // Simulate privacy access analysis
                const accessRequests = [];
                
                // Common access requests websites might make
                const possibleAccess = [
                    { name: 'Location', icon: 'fas fa-map-marker-alt', probability: 0.7 },
                    { name: 'Camera', icon: 'fas fa-camera', probability: 0.3 },
                    { name: 'Microphone', icon: 'fas fa-microphone', probability: 0.2 },
                    { name: 'Notifications', icon: 'fas fa-bell', probability: 0.6 },
                    { name: 'Cookies', icon: 'fas fa-cookie', probability: 0.9 },
                    { name: 'Storage', icon: 'fas fa-database', probability: 0.8 },
                    { name: 'Contacts', icon: 'fas fa-address-book', probability: 0.1 },
                    { name: 'Payment Info', icon: 'fas fa-credit-card', probability: 0.4 }
                ];
                
                possibleAccess.forEach(access => {
                    if (Math.random() < access.probability) {
                        const status = Math.random() > 0.3 ? 'granted' : 
                                      Math.random() > 0.5 ? 'denied' : 'unknown';
                        accessRequests.push({
                            name: access.name,
                            icon: access.icon,
                            status: status
                        });
                    }
                });

                let riskScore = 0;
                const riskFactors = [];
                
                // Calculate risk based on sensitive access requests
                const sensitiveAccess = accessRequests.filter(access => 
                    ['Camera', 'Microphone', 'Location', 'Payment Info', 'Contacts'].includes(access.name)
                );
                
                if (sensitiveAccess.length > 2) {
                    riskFactors.push('Excessive sensitive access requests');
                    riskScore += 20;
                }
                
                if (accessRequests.some(access => access.name === 'Camera' && access.status === 'granted')) {
                    riskFactors.push('Camera access granted');
                    riskScore += 15;
                }
                
                if (accessRequests.some(access => access.name === 'Microphone' && access.status === 'granted')) {
                    riskFactors.push('Microphone access granted');
                    riskScore += 15;
                }

                const riskLevel = riskScore >= 20 ? 'high' : riskScore >= 10 ? 'medium' : 'low';
                
                return {
                    sourceMethod: 'checkPrivacyAccess',
                    riskScore: Math.min(riskScore, 30),
                    riskLevel: riskLevel,
                    message: `${accessRequests.length} privacy access requests detected`,
                    details: riskFactors.length > 0 ? riskFactors : ['Privacy access appears reasonable'],
                    privacyResult: {
                        accessRequests: accessRequests,
                        summary: `This website requests access to ${accessRequests.length} different resources. ${sensitiveAccess.length > 0 ? 'Some of these may be sensitive.' : 'None appear to be highly sensitive.'}`,
                        recommendations: 'Review each permission request carefully. Only grant access to resources that are necessary for the website\'s functionality.'
                    }
                };
            }

            async runAIAnalysis(url) {
                // Simulate AI analysis with Perplexity AI
                const urlObj = new URL(url);
                const domain = urlObj.hostname;
                
                // Generate realistic AI analysis based on domain characteristics
                let aiMessage = '';
                let confidence = 0;
                
                if (this.knownSafeDomains.includes(domain)) {
                    aiMessage = `Based on my analysis, ${domain} appears to be a legitimate and well-established website. No significant security threats were detected in the current scan. The domain has a strong reputation and proper security measures in place.`;
                    confidence = 92;
                } else if (this.knownMaliciousDomains.includes(domain)) {
                    aiMessage = `WARNING: ${domain} exhibits multiple characteristics associated with malicious websites. I've detected patterns consistent with phishing attempts and potential security threats. Exercise extreme caution when interacting with this site.`;
                    confidence = 88;
                } else {
                    // Generate semi-random analysis for unknown domains
                    const isLikelySafe = Math.random() > 0.3; // 70% chance
                    
                    if (isLikelySafe) {
                        aiMessage = `My analysis of ${domain} indicates it's likely safe for browsing. While I didn't find any major red flags, I recommend exercising normal caution as with any unfamiliar website. The domain shows typical patterns of legitimate web services.`;
                        confidence = Math.floor(Math.random() * 20) + 70; // 70-90%
                    } else {
                        aiMessage = `I've identified several concerning patterns in ${domain}. While not definitively malicious, the website exhibits characteristics that warrant caution. I recommend verifying the site's legitimacy through other sources before providing any personal information.`;
                        confidence = Math.floor(Math.random() * 25) + 65; // 65-90%
                    }
                }

                return {
                    sourceMethod: 'runAIAnalysis',
                    riskScore: 100 - confidence, // Inverse of confidence
                    riskLevel: confidence > 80 ? 'low' : confidence > 60 ? 'medium' : 'high',
                    message: 'AI analysis completed',
                    details: ['Perplexity AI security assessment finished'],
                    aiResult: {
                        message: aiMessage,
                        confidence: confidence
                    }
                };
            }
        }

        // Initialize the security analyzer
        const securityAnalyzer = new SecurityAnalyzer();

        // Start AI Analysis Function
        async function startAIAnalysis() {
            const urlInput = document.getElementById('urlInput');
            const resultDiv = document.getElementById('result');
            const url = urlInput.value.trim();
            
            if (!url || url === 'https://') {
                resultDiv.innerHTML = '<p style="color: var(--warning);">Please enter a valid URL to analyze.</p>';
                return;
            }

            // Validate URL format
            try {
                new URL(url);
            } catch (e) {
                resultDiv.innerHTML = '<p style="color: var(--danger);">Please enter a valid URL format (e.g., https://example.com).</p>';
                return;
            }

            resultDiv.innerHTML = '<p style="color: var(--primary);"><i class="fas fa-spinner fa-spin"></i> Starting comprehensive security analysis with Perplexity AI...</p>';

            try {
                const analysisResult = await securityAnalyzer.analyzeURL(url);
                
                // Display final results
                const securityScore = analysisResult.securityScore;
                const riskColor = securityScore >= 80 ? 'var(--success)' : 
                                 securityScore >= 60 ? 'var(--warning)' : 'var(--danger)';
                
                resultDiv.innerHTML = `
                    <div style="text-align: center; margin: 20px 0;">
                        <h3 style="color: ${riskColor}; margin-bottom: 10px;">Security Score: ${securityScore}/100</h3>
                        <div style="height: 20px; background: var(--border); border-radius: 10px; overflow: hidden; margin: 10px 0;">
                            <div style="height: 100%; width: ${securityScore}%; background: ${riskColor}; border-radius: 10px;"></div>
                        </div>
                        <p style="margin-top: 15px;">
                            ${securityScore >= 80 ? 
                                '<i class="fas fa-shield-alt" style="color: var(--success);"></i> This website appears safe to use.' : 
                             securityScore >= 60 ? 
                                '<i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i> Use caution when browsing this website.' : 
                                '<i class="fas fa-skull-crossbones" style="color: var(--danger);"></i> This website may pose security risks.'}
                        </p>
                    </div>
                    <div class="safety-tips">
                        <h4><i class="fas fa-lightbulb"></i> Safety Recommendations</h4>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Always verify the website's URL before entering sensitive information</li>
                            <li>Use a password manager to avoid phishing attempts</li>
                            <li>Keep your browser and security software up to date</li>
                            <li>Enable two-factor authentication where available</li>
                            <li>Be cautious of unexpected permission requests</li>
                        </ul>
                    </div>
                `;
            } catch (error) {
                console.error('Analysis error:', error);
                resultDiv.innerHTML = '<p style="color: var(--danger);">An error occurred during analysis. Please try again.</p>';
            }
        }

        // Add event listener for Enter key in URL input
        document.getElementById('urlInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startAIAnalysis();
            }
        });
    </script>
</body>
</html>